<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <table border="2">
    <th>御請求金額</th>
    <td class="total_amount"></td>
  </table>
  <br>

  <table border="1">
    <tr>
      <th>内容</th>
      <th>単価</th>
      <th>数量</th>
      <th>金額</th>
    </tr>
    <tr>
      <th>商品Ａ</th>
      <td ><input type="number" id="amount_a"></td>
      <td ><input type="number" id="quantity_a"></td>
      <td id="total_a"></td>
    </tr>
    <th>商品Ｂ</th>
    <td ><input type="number" id="amount_b"></td>
    <td ><input type="number" id="quantity_b"></td>
    <td id="total_b"></td>
  </table>
 
  <p>小計</p>
  <div id="subtotal"></div>
  <br>

  <p>消費税（10％）</p>
  <div id="tax"></div>
  <br>

  <p>合計</p>
  <div class="total_amount"></div>
  <br>

  <input type="button" value="計算" onclick="display()"/>

  <script>
     function display() {
      let amount_a= document.getElementById('amount_a').value;
      let quantity_a = document.getElementById('quantity_a').value;
      let amount_b = document.getElementById('amount_b').value.toLocaleString();
      let quantity_b = document.getElementById('quantity_b').value;

      // 商品Ａの金額を求める
      let total_a = document.getElementById('total_a');
      total_a.textContent = calc_product(amount_a, quantity_a);

      // 商品Ｂの金額を求める
      let total_b = document.getElementById('total_b');
      total_b.textContent = calc_product(amount_b, quantity_b);

      // 小計を求める
      let subtotal = document.getElementById('subtotal');
      subtotal.textContent = calc_sum(Number(total_a.textContent), Number(total_b.textContent));

      // 消費税（10％）を求める
      let tax = document.getElementById('tax');
      tax.textContent = calc_tax(Number(subtotal.textContent));

      // 合計金額を求める（小計 ＋ 消費税（10％））
      let total_amount = document.getElementsByClassName('total_amount');
      total_amount.textContent = calc_sum(Number(subtotal.textContent), Number(tax.textContent)); 
     }

    function calc_product(value1, value2){
      return value1 * value2;
    }

    function calc_tax(value){
      return value * 0.1
    }

    function calc_sum(value1, value2){
      return value1 +  value2
    }
  </script>
</body>
</html>
